schema: '2.0'
stages:
  extract:
    cmd: python data_engineering/load_data.py --output_dir data/raw --start_date 2016-01-01
    deps:
    - path: data_engineering/load_data.py
      hash: md5
      md5: af2fef8ed9e50e501381206a292d3205
      size: 3808
    params:
      params.yaml:
        start_date: '2016-01-01'
    outs:
    - path: data/raw
      hash: md5
      md5: 929ea076eab2d85782abd3af22e396c2.dir
      size: 740214
      nfiles: 4
  transform:
    cmd: python data_engineering/prepare_data.py --input_dir data/raw --output_dir
      data/prepared --sequence_length 1000 --prediction_horizon 1
    deps:
    - path: data/raw
      hash: md5
      md5: 929ea076eab2d85782abd3af22e396c2.dir
      size: 740214
      nfiles: 4
    - path: data_engineering/prepare_data.py
      hash: md5
      md5: b98cf6cda363167c9135f06111a8a1c2
      size: 6949
    params:
      params.yaml:
        prediction_horizon: 1
        sequence_length: 1000
    outs:
    - path: data/prepared
      hash: md5
      md5: ba47468e344d70d3396b3894cc383328.dir
      size: 614973
      nfiles: 4
    - path: data/test
      hash: md5
      md5: 9abf6be37d905c3bb2c6cda4417efbf2.dir
      size: 154379
      nfiles: 4
  hyperparameter_tuning:
    cmd: python model_training/tuning.py --data_path data/prepared/USD_INR_transformed.csv
      --train_sequence 700 --mlflow_tracking_uri http://localhost:5000 --experiment_name
      forex_prediction_tuning
    deps:
    - path: data/prepared/USD_INR_transformed.csv
      hash: md5
      md5: bfed29e49b2f0ebb16f467be31b44ff1
      size: 153815
    - path: model_training/tuning.py
      hash: md5
      md5: 31725e4e09be98f072375172bd81fc80
      size: 4848
    params:
      params.yaml:
        experiment_name: forex_prediction
        mlflow_tracking_uri: http://localhost:5000
        train_sequence: 700
    outs:
    - path: model_training/tuning_results
      hash: md5
      md5: 1cab8351f6cd751b7503cf377f2b76da.dir
      size: 1178
      nfiles: 2
  evaluate:
    cmd: "python model_training/evaluation.py  --model_run_id $(cat model_training/tuning_results/best_params.json
      | jq -r '.run_id')  --data_path data/test/USD_INR_transformed.csv --test_sequence
      150  --reference_data_path data/prepared/USD_INR_transformed.csv  --mlflow_tracking_uri
      http://localhost:5000  --output_dir model_training/evaluation_results\n"
    deps:
    - path: data/prepared/USD_INR_transformed.csv
      hash: md5
      md5: bfed29e49b2f0ebb16f467be31b44ff1
      size: 153815
    - path: data/test/USD_INR_transformed.csv
      hash: md5
      md5: 3bf7c5f88d126529d4a7ae28174e1caa
      size: 38738
    - path: model_training/evaluation.py
      hash: md5
      md5: 79a5f369532b96fcb009495ac3d10baf
      size: 8731
    - path: model_training/tuning_results
      hash: md5
      md5: 1cab8351f6cd751b7503cf377f2b76da.dir
      size: 1178
      nfiles: 2
    params:
      params.yaml:
        mlflow_tracking_uri: http://localhost:5000
        test_sequence: 150
    outs:
    - path: model_training/evaluation_results
      hash: md5
      md5: a820287149ed3096d2ec0579a58ad269.dir
      size: 679762
      nfiles: 16
